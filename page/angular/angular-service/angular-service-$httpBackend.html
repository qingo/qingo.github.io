<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'/>
    <meta name="description" content="Blog : Qingo" />
    <title>Qingo的博客</title>
</head>
<body>
<h1>$httpBackend</h1>

<h2>根作用域服务</h2>

<h3>服务依赖</h3>

<ul><li>$browser</li><li>$window</li><li>$document</li></ul>

<h3>this.$get函数</h3>

<pre><code>this.$get = [&#39;$browser&#39;, &#39;$window&#39;, &#39;$document&#39;, function ($browser, $window, $document) {
    return createHttpBackend($browser, createXhr, $browser.defer, $window.angular.callbacks, $document[0]);
}];</code></pre>

<h3>结构</h3>

<pre><code>{{Function}}</code></pre>

<h3>问题</h3>

<pre><code>callbacks[callbackId] = function (data) {
    callbacks[callbackId].data = data;
    callbacks[callbackId].called = true;
};</code></pre>

<p>此函数未执行，那么callbacks[callbackId].called 的值为false， 这样event.type === &#39;error&#39;</p>
</body>
</html>